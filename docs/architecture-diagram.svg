<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" width="1200" height="800" viewBox="0 0 1200 800">
  <defs>
    <style>
      .title { font-family: Arial, sans-serif; font-size: 18px; font-weight: bold; fill: #333; }
      .subtitle { font-family: Arial, sans-serif; font-size: 14px; fill: #666; }
      .box { fill: #f8f9fa; stroke: #dee2e6; stroke-width: 2; rx: 8; }
      .frontend { fill: #e1f5fe; stroke: #0288d1; }
      .backend { fill: #f3e5f5; stroke: #7b1fa2; }
      .ai { fill: #e8f5e8; stroke: #388e3c; }
      .data { fill: #fff3e0; stroke: #f57c00; }
      .external { fill: #fce4ec; stroke: #c2185b; }
      .arrow { stroke: #666; stroke-width: 2; fill: none; marker-end: url(#arrowhead); }
      .label { font-family: Arial, sans-serif; font-size: 12px; fill: #333; text-anchor: middle; }
    </style>
    <marker id="arrowhead" markerWidth="10" markerHeight="7" refX="9" refY="3.5" orient="auto">
      <polygon points="0 0, 10 3.5, 0 7" fill="#666" />
    </marker>
  </defs>
  
  <!-- Title -->
  <text x="600" y="30" class="title" text-anchor="middle">Xiaolu-Workflow 技术架构图</text>
  
  <!-- Frontend Layer -->
  <g>
    <text x="150" y="80" class="subtitle">前端层</text>
    <rect x="50" y="100" width="200" height="60" class="box frontend"/>
    <text x="150" y="125" class="label">Web应用</text>
    <text x="150" y="145" class="label">(React + Next.js)</text>
    
    <rect x="300" y="100" width="200" height="60" class="box frontend"/>
    <text x="400" y="125" class="label">移动端适配</text>
    <text x="400" y="145" class="label">(响应式设计)</text>
  </g>
  
  <!-- API Gateway -->
  <g>
    <text x="275" y="220" class="subtitle">API网关层</text>
    <rect x="200" y="240" width="200" height="60" class="box"/>
    <text x="300" y="265" class="label">API Gateway</text>
    <text x="300" y="285" class="label">(Nginx/Traefik)</text>
  </g>
  
  <!-- Business Services -->
  <g>
    <text x="600" y="360" class="subtitle">业务服务层</text>
    
    <rect x="50" y="380" width="180" height="80" class="box backend"/>
    <text x="140" y="405" class="label">爬虫服务</text>
    <text x="140" y="425" class="label">(Python + Scrapy)</text>
    <text x="140" y="445" class="label">定时任务</text>
    
    <rect x="270" y="380" width="180" height="80" class="box backend"/>
    <text x="360" y="405" class="label">内容管理服务</text>
    <text x="360" y="425" class="label">(Node.js + Express)</text>
    <text x="360" y="445" class="label">API接口</text>
    
    <rect x="490" y="380" width="180" height="80" class="box ai"/>
    <text x="580" y="405" class="label">AI文案生成服务</text>
    <text x="580" y="425" class="label">(Python + FastAPI)</text>
    <text x="580" y="445" class="label">LangChain集成</text>
    
    <rect x="710" y="380" width="180" height="80" class="box backend"/>
    <text x="800" y="405" class="label">定时任务服务</text>
    <text x="800" y="425" class="label">(Celery + Redis)</text>
    <text x="800" y="445" class="label">任务调度</text>
  </g>
  
  <!-- Data Layer -->
  <g>
    <text x="350" y="540" class="subtitle">数据层</text>
    
    <rect x="100" y="560" width="150" height="80" class="box data"/>
    <text x="175" y="585" class="label">PostgreSQL</text>
    <text x="175" y="605" class="label">(主数据库)</text>
    <text x="175" y="625" class="label">关系数据存储</text>
    
    <rect x="300" y="560" width="150" height="80" class="box data"/>
    <text x="375" y="585" class="label">Redis</text>
    <text x="375" y="605" class="label">(缓存 + 队列)</text>
    <text x="375" y="625" class="label">高速缓存</text>
    
    <rect x="500" y="560" width="150" height="80" class="box data"/>
    <text x="575" y="585" class="label">对象存储</text>
    <text x="575" y="605" class="label">(OSS/S3)</text>
    <text x="575" y="625" class="label">图片文件存储</text>
  </g>
  
  <!-- External Services -->
  <g>
    <text x="950" y="220" class="subtitle">外部服务</text>
    
    <rect x="850" y="240" width="150" height="60" class="box external"/>
    <text x="925" y="265" class="label">小红书API</text>
    <text x="925" y="285" class="label">数据源</text>
    
    <rect x="850" y="320" width="150" height="60" class="box external"/>
    <text x="925" y="345" class="label">大语言模型</text>
    <text x="925" y="365" class="label">(OpenAI/Claude)</text>
  </g>
  
  <!-- Arrows -->
  <!-- Frontend to Gateway -->
  <line x1="150" y1="160" x2="250" y2="240" class="arrow"/>
  <line x1="400" y1="160" x2="350" y2="240" class="arrow"/>
  
  <!-- Gateway to Services -->
  <line x1="300" y1="300" x2="360" y2="380" class="arrow"/>
  <line x1="320" y1="300" x2="580" y2="380" class="arrow"/>
  
  <!-- Services to Data -->
  <line x1="140" y1="460" x2="175" y2="560" class="arrow"/>
  <line x1="140" y1="460" x2="575" y2="560" class="arrow"/>
  <line x1="360" y1="460" x2="175" y2="560" class="arrow"/>
  <line x1="360" y1="460" x2="375" y2="560" class="arrow"/>
  <line x1="580" y1="460" x2="175" y2="560" class="arrow"/>
  <line x1="800" y1="460" x2="375" y2="560" class="arrow"/>
  <line x1="800" y1="420" x2="140" y2="420" class="arrow"/>
  
  <!-- External Services -->
  <line x1="140" y1="400" x2="850" y2="270" class="arrow"/>
  <line x1="580" y1="400" x2="850" y2="350" class="arrow"/>
  
  <!-- Legend -->
  <g transform="translate(50, 700)">
    <text x="0" y="0" class="subtitle">图例：</text>
    <rect x="0" y="10" width="20" height="15" class="box frontend"/>
    <text x="25" y="22" class="label">前端服务</text>
    <rect x="100" y="10" width="20" height="15" class="box backend"/>
    <text x="125" y="22" class="label">后端服务</text>
    <rect x="200" y="10" width="20" height="15" class="box ai"/>
    <text x="225" y="22" class="label">AI服务</text>
    <rect x="300" y="10" width="20" height="15" class="box data"/>
    <text x="325" y="22" class="label">数据存储</text>
    <rect x="400" y="10" width="20" height="15" class="box external"/>
    <text x="425" y="22" class="label">外部服务</text>
  </g>
</svg>
