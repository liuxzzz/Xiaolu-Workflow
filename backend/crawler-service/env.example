# Xiaolu-Workflow 爬虫服务环境变量配置文件
# 复制此文件为 .env 并填入实际值

# ===========================================
# 基础配置
# ===========================================

# 运行环境 (development/production)
ENVIRONMENT=development

# 日志配置
LOG_LEVEL=INFO
LOG_FILE=./logs/crawler.log

# ===========================================
# 数据库配置
# ===========================================

# PostgreSQL主数据库
DB_HOST=localhost
DB_PORT=5432
DB_NAME=xiaolu_workflow
DB_USER=postgres
DB_PASSWORD=password
DB_MAX_CONNECTIONS=20
DB_POOL_SIZE=10

# 数据库连接URL (可选，优先级高于上面的单独配置)
# DATABASE_URL=postgresql://postgres:password@localhost:5432/xiaolu_workflow

# ===========================================
# Redis缓存配置
# ===========================================

REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=
REDIS_MAX_CONNECTIONS=10

# Redis连接URL (可选)
# REDIS_URL=redis://localhost:6379/0

# ===========================================
# 爬虫配置
# ===========================================

# 并发配置
CONCURRENT_REQUESTS=8
CONCURRENT_REQUESTS_PER_DOMAIN=1

# 延迟配置
DELAY_MIN=1.0
DELAY_MAX=3.0
DOWNLOAD_DELAY=3

# 重试配置
RETRY_TIMES=3
RETRY_DELAY=5

# 小红书爬虫配置
MAX_PAGES_PER_KEYWORD=10
KEYWORDS=美妆,时尚,护肤,彩妆,穿搭
ENABLE_COMMENTS=false
ENABLE_USER_INFO=false
MIN_LIKES_COUNT=100
MIN_COMMENTS_COUNT=10

# ===========================================
# 文件存储配置
# ===========================================

# 图片下载路径
IMAGES_STORE=./downloads/images
IMAGES_DOWNLOAD_PATH=./downloads/images
IMAGES_MAX_SIZE=10485760  # 10MB

# JSON输出路径
JSON_OUTPUT_DIR=./output

# 日志目录
LOGS_DIR=./logs

# ===========================================
# 代理配置
# ===========================================

# 是否启用代理
USE_PROXY=false

# 代理列表文件路径
PROXY_FILE=proxies.txt

# 代理列表 (逗号分隔)
# PROXY_LIST=proxy1:port1,proxy2:port2,proxy3:port3

# 代理认证 (如果需要)
# PROXY_USERNAME=
# PROXY_PASSWORD=

# ===========================================
# Selenium配置
# ===========================================

# 是否启用Selenium
USE_SELENIUM=false

# Selenium超时时间
SELENIUM_TIMEOUT=30

# Chrome驱动路径 (留空自动检测)
CHROME_DRIVER_PATH=

# Chrome配置
CHROME_HEADLESS=true
CHROME_WINDOW_SIZE=1920,1080

# ===========================================
# API服务配置
# ===========================================

# API服务器配置
API_HOST=0.0.0.0
API_PORT=8080

# 健康检查配置
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# ===========================================
# 监控配置
# ===========================================

# 监控指标端口
METRICS_PORT=9090

# 是否启用监控
ENABLE_METRICS=true

# 告警配置
ENABLE_ALERTS=false
ALERT_WEBHOOK=

# Prometheus配置
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# ===========================================
# 安全配置
# ===========================================

# API密钥 (如果需要认证)
# API_KEY=your-secret-api-key

# JWT密钥 (如果使用JWT认证)
# JWT_SECRET=your-jwt-secret-key

# 允许的主机列表 (逗号分隔)
ALLOWED_HOSTS=localhost,127.0.0.1

# ===========================================
# 反爬策略配置
# ===========================================

# 最大请求频率 (每分钟)
MAX_REQUESTS_PER_MINUTE=30

# 是否启用验证码检测
ENABLE_CAPTCHA_DETECTION=true

# 备用策略 (retry/skip/stop)
BACKUP_STRATEGY=retry

# 冷却时间 (秒)
COOLDOWN_TIME=300

# ===========================================
# 质量控制配置
# ===========================================

# 内容长度限制
MIN_CONTENT_LENGTH=50
MAX_CONTENT_LENGTH=10000

# 必填字段
REQUIRED_FIELDS=note_id,title,content,author_name

# 是否过滤重复数据
FILTER_DUPLICATES=true

# 是否启用质量评分
ENABLE_QUALITY_SCORE=true

# ===========================================
# 第三方服务配置
# ===========================================

# AWS S3配置 (如果使用)
# AWS_ACCESS_KEY_ID=
# AWS_SECRET_ACCESS_KEY=
# AWS_REGION=us-east-1
# S3_BUCKET=xiaolu-workflow-images

# 阿里云OSS配置 (如果使用)
# ALIYUN_ACCESS_KEY_ID=
# ALIYUN_ACCESS_KEY_SECRET=
# ALIYUN_ENDPOINT=
# OSS_BUCKET=xiaolu-workflow-images

# 微信通知配置 (如果使用)
# WECHAT_WEBHOOK=

# 钉钉通知配置 (如果使用)
# DINGTALK_WEBHOOK=

# ===========================================
# 开发配置
# ===========================================

# 调试模式
DEBUG=false

# 是否显示SQL日志
SHOW_SQL=false

# 是否启用热重载
HOT_RELOAD=false

# 测试模式
TEST_MODE=false

# ===========================================
# 性能配置
# ===========================================

# 内存限制 (MB)
MEMORY_LIMIT=2048
MEMORY_WARNING=1024

# 磁盘空间限制 (GB)
DISK_LIMIT=50
DISK_WARNING=40

# 超时配置
REQUEST_TIMEOUT=30
DOWNLOAD_TIMEOUT=60
SPIDER_TIMEOUT=3600

# ===========================================
# Cookie配置
# ===========================================

# Cookie文件路径
COOKIES_FILE=cookies.json

# 是否启用Cookie
COOKIES_ENABLED=true

# 是否调试Cookie
COOKIES_DEBUG=false

# ===========================================
# 用户代理配置
# ===========================================

# 是否轮换User-Agent
ROTATE_USER_AGENT=true

# User-Agent列表文件
USER_AGENT_FILE=user_agents.txt

# ===========================================
# 其他配置
# ===========================================

# 时区设置
TIMEZONE=Asia/Shanghai

# 语言设置
LANGUAGE=zh-CN

# 编码设置
ENCODING=utf-8

# 是否启用HTTPS
USE_HTTPS=false

# SSL验证
SSL_VERIFY=true
